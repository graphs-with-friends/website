(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{24:function(e,t,r){"use strict";function RedBlackTree(){this._=null}function RedBlackNode(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function RedBlackRotateLeft(e,t){var r=t,i=t.R,a=r.U;a?a.L===r?a.L=i:a.R=i:e._=i,i.U=a,r.U=i,r.R=i.L,r.R&&(r.R.U=r),i.L=r}function RedBlackRotateRight(e,t){var r=t,i=t.L,a=r.U;a?a.L===r?a.L=i:a.R=i:e._=i,i.U=a,r.U=i,r.L=i.R,r.L&&(r.L.U=r),i.R=r}function RedBlackFirst(e){for(;e.L;)e=e.L;return e}RedBlackTree.prototype={constructor:RedBlackTree,insert:function(e,t){var r,i,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;r=e}else this._?(e=RedBlackFirst(this._),t.P=null,t.N=e,e.P=e.L=t,r=e):(t.P=t.N=null,this._=t,r=null);for(t.L=t.R=null,t.U=r,t.C=!0,e=t;r&&r.C;)r===(i=r.U).L?(a=i.R)&&a.C?(r.C=a.C=!1,i.C=!0,e=i):(e===r.R&&(RedBlackRotateLeft(this,r),r=(e=r).U),r.C=!1,i.C=!0,RedBlackRotateRight(this,i)):(a=i.L)&&a.C?(r.C=a.C=!1,i.C=!0,e=i):(e===r.L&&(RedBlackRotateRight(this,r),r=(e=r).U),r.C=!1,i.C=!0,RedBlackRotateLeft(this,i)),r=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,r,i,a=e.U,l=e.L,n=e.R;if(r=l?n?RedBlackFirst(n):l:n,a?a.L===e?a.L=r:a.R=r:this._=r,l&&n?(i=r.C,r.C=e.C,r.L=l,l.U=r,r!==n?(a=r.U,r.U=e.U,e=r.R,a.L=e,r.R=n,n.U=r):(r.U=a,a=r,e=r.R)):(i=e.C,e=r),e&&(e.U=a),!i)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===a.L){if((t=a.R).C&&(t.C=!1,a.C=!0,RedBlackRotateLeft(this,a),t=a.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,RedBlackRotateRight(this,t),t=a.R),t.C=a.C,a.C=t.R.C=!1,RedBlackRotateLeft(this,a),e=this._;break}}else if((t=a.L).C&&(t.C=!1,a.C=!0,RedBlackRotateRight(this,a),t=a.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,RedBlackRotateLeft(this,t),t=a.L),t.C=a.C,a.C=t.L.C=!1,RedBlackRotateRight(this,a),e=this._;break}t.C=!0,e=a,a=a.U}while(!e.C);e&&(e.C=!1)}}};var i=RedBlackTree;function createEdge(e,t,r,i){var a=[null,null],l=h.push(a)-1;return a.left=e,a.right=t,r&&setEdgeEnd(a,e,t,r),i&&setEdgeEnd(a,t,e,i),f[e.index].halfedges.push(l),f[t.index].halfedges.push(l),a}function createBorderEdge(e,t,r){var i=[t,r];return i.left=e,i}function setEdgeEnd(e,t,r,i){e[0]||e[1]?e.left===r?e[1]=i:e[0]=i:(e[0]=i,e.left=t,e.right=r)}function clipEdge(e,t,r,i,a){var l,n=e[0],c=e[1],f=n[0],s=n[1],h=0,d=1,u=c[0]-f,o=c[1]-s;if(l=t-f,u||!(l>0)){if(l/=u,u<0){if(l<h)return;l<d&&(d=l)}else if(u>0){if(l>d)return;l>h&&(h=l)}if(l=i-f,u||!(l<0)){if(l/=u,u<0){if(l>d)return;l>h&&(h=l)}else if(u>0){if(l<h)return;l<d&&(d=l)}if(l=r-s,o||!(l>0)){if(l/=o,o<0){if(l<h)return;l<d&&(d=l)}else if(o>0){if(l>d)return;l>h&&(h=l)}if(l=a-s,o||!(l<0)){if(l/=o,o<0){if(l>d)return;l>h&&(h=l)}else if(o>0){if(l<h)return;l<d&&(d=l)}return!(h>0||d<1)||(h>0&&(e[0]=[f+h*u,s+h*o]),d<1&&(e[1]=[f+d*u,s+d*o]),!0)}}}}}function connectEdge(e,t,r,i,a){var l=e[1];if(l)return!0;var n,c,f=e[0],s=e.left,h=e.right,d=s[0],u=s[1],o=h[0],g=h[1],R=(d+o)/2,C=(u+g)/2;if(g===u){if(R<t||R>=i)return;if(d>o){if(f){if(f[1]>=a)return}else f=[R,r];l=[R,a]}else{if(f){if(f[1]<r)return}else f=[R,a];l=[R,r]}}else if(c=C-(n=(d-o)/(g-u))*R,n<-1||n>1)if(d>o){if(f){if(f[1]>=a)return}else f=[(r-c)/n,r];l=[(a-c)/n,a]}else{if(f){if(f[1]<r)return}else f=[(a-c)/n,a];l=[(r-c)/n,r]}else if(u<g){if(f){if(f[0]>=i)return}else f=[t,n*t+c];l=[i,n*i+c]}else{if(f){if(f[0]<t)return}else f=[i,n*i+c];l=[t,n*t+c]}return e[0]=f,e[1]=l,!0}function cellHalfedgeAngle(e,t){var r=e.site,i=t.left,a=t.right;return r===a&&(a=i,i=r),a?Math.atan2(a[1]-i[1],a[0]-i[0]):(r===i?(i=t[1],a=t[0]):(i=t[0],a=t[1]),Math.atan2(i[0]-a[0],a[1]-i[1]))}function cellHalfedgeStart(e,t){return t[+(t.left!==e.site)]}function cellHalfedgeEnd(e,t){return t[+(t.left===e.site)]}var a,l=[];function Circle(){RedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(e){var t=e.P,r=e.N;if(t&&r){var i=t.site,n=e.site,c=r.site;if(i!==c){var f=n[0],h=n[1],d=i[0]-f,o=i[1]-h,g=c[0]-f,R=c[1]-h,C=2*(d*R-o*g);if(!(C>=-u)){var v=d*d+o*o,B=g*g+R*R,L=(R*v-o*B)/C,p=(d*B-g*v)/C,k=l.pop()||new Circle;k.arc=e,k.site=n,k.x=L+f,k.y=(k.cy=p+h)+Math.sqrt(L*L+p*p),e.circle=k;for(var E=null,b=s._;b;)if(k.y<b.y||k.y===b.y&&k.x<=b.x){if(!b.L){E=b.P;break}b=b.L}else{if(!b.R){E=b;break}b=b.R}s.insert(E,k),E||(a=k)}}}}function detachCircle(e){var t=e.circle;t&&(t.P||(a=t.N),s.remove(t),l.push(t),RedBlackNode(t),e.circle=null)}var n=[];function Beach(){RedBlackNode(this),this.edge=this.site=this.circle=null}function createBeach(e){var t=n.pop()||new Beach;return t.site=e,t}function detachBeach(e){detachCircle(e),c.remove(e),n.push(e),RedBlackNode(e)}function removeBeach(e){var t=e.circle,r=t.x,i=t.cy,a=[r,i],l=e.P,n=e.N,c=[e];detachBeach(e);for(var f=l;f.circle&&Math.abs(r-f.circle.x)<d&&Math.abs(i-f.circle.cy)<d;)l=f.P,c.unshift(f),detachBeach(f),f=l;c.unshift(f),detachCircle(f);for(var s=n;s.circle&&Math.abs(r-s.circle.x)<d&&Math.abs(i-s.circle.cy)<d;)n=s.N,c.push(s),detachBeach(s),s=n;c.push(s),detachCircle(s);var h,u=c.length;for(h=1;h<u;++h)s=c[h],f=c[h-1],setEdgeEnd(s.edge,f.site,s.site,a);f=c[0],(s=c[u-1]).edge=createEdge(f.site,s.site,null,a),attachCircle(f),attachCircle(s)}function addBeach(e){for(var t,r,i,a,l=e[0],n=e[1],s=c._;s;)if((i=leftBreakPoint(s,n)-l)>d)s=s.L;else{if(!((a=l-rightBreakPoint(s,n))>d)){i>-d?(t=s.P,r=s):a>-d?(t=s,r=s.N):t=r=s;break}if(!s.R){t=s;break}s=s.R}!function createCell(e){return f[e.index]={site:e,halfedges:[]}}(e);var h=createBeach(e);if(c.insert(t,h),t||r){if(t===r)return detachCircle(t),r=createBeach(t.site),c.insert(h,r),h.edge=r.edge=createEdge(t.site,h.site),attachCircle(t),void attachCircle(r);if(r){detachCircle(t),detachCircle(r);var u=t.site,o=u[0],g=u[1],R=e[0]-o,C=e[1]-g,v=r.site,B=v[0]-o,L=v[1]-g,p=2*(R*L-C*B),k=R*R+C*C,E=B*B+L*L,b=[(L*k-C*E)/p+o,(R*E-B*k)/p+g];setEdgeEnd(r.edge,u,v,b),h.edge=createEdge(u,e,null,b),r.edge=createEdge(e,v,null,b),attachCircle(t),attachCircle(r)}else h.edge=createEdge(t.site,h.site)}}function leftBreakPoint(e,t){var r=e.site,i=r[0],a=r[1],l=a-t;if(!l)return i;var n=e.P;if(!n)return-1/0;var c=(r=n.site)[0],f=r[1],s=f-t;if(!s)return c;var h=c-i,d=1/l-1/s,u=h/s;return d?(-u+Math.sqrt(u*u-2*d*(h*h/(-2*s)-f+s/2+a-l/2)))/d+i:(i+c)/2}function rightBreakPoint(e,t){var r=e.N;if(r)return leftBreakPoint(r,t);var i=e.site;return i[1]===t?i[0]:1/0}var c,f,s,h,d=1e-6,u=1e-12;function lexicographic(e,t){return t[1]-e[1]||t[0]-e[0]}function Diagram(e,t){var r,l,n,u=e.sort(lexicographic).pop();for(h=[],f=new Array(e.length),c=new i,s=new i;;)if(n=a,u&&(!n||u[1]<n.y||u[1]===n.y&&u[0]<n.x))u[0]===r&&u[1]===l||(addBeach(u),r=u[0],l=u[1]),u=e.pop();else{if(!n)break;removeBeach(n.arc)}if(function sortCellHalfedges(){for(var e,t,r,i,a=0,l=f.length;a<l;++a)if((e=f[a])&&(i=(t=e.halfedges).length)){var n=new Array(i),c=new Array(i);for(r=0;r<i;++r)n[r]=r,c[r]=cellHalfedgeAngle(e,h[t[r]]);for(n.sort(function(e,t){return c[t]-c[e]}),r=0;r<i;++r)c[r]=t[n[r]];for(r=0;r<i;++r)t[r]=c[r]}}(),t){var o=+t[0][0],g=+t[0][1],R=+t[1][0],C=+t[1][1];!function clipEdges(e,t,r,i){for(var a,l=h.length;l--;)connectEdge(a=h[l],e,t,r,i)&&clipEdge(a,e,t,r,i)&&(Math.abs(a[0][0]-a[1][0])>d||Math.abs(a[0][1]-a[1][1])>d)||delete h[l]}(o,g,R,C),function clipCells(e,t,r,i){var a,l,n,c,s,u,o,g,R,C,v,B,L=f.length,p=!0;for(a=0;a<L;++a)if(l=f[a]){for(n=l.site,c=(s=l.halfedges).length;c--;)h[s[c]]||s.splice(c,1);for(c=0,u=s.length;c<u;)v=(C=cellHalfedgeEnd(l,h[s[c]]))[0],B=C[1],g=(o=cellHalfedgeStart(l,h[s[++c%u]]))[0],R=o[1],(Math.abs(v-g)>d||Math.abs(B-R)>d)&&(s.splice(c,0,h.push(createBorderEdge(n,C,Math.abs(v-e)<d&&i-B>d?[e,Math.abs(g-e)<d?R:i]:Math.abs(B-i)<d&&r-v>d?[Math.abs(R-i)<d?g:r,i]:Math.abs(v-r)<d&&B-t>d?[r,Math.abs(g-r)<d?R:t]:Math.abs(B-t)<d&&v-e>d?[Math.abs(R-t)<d?g:e,t]:null))-1),++u);u&&(p=!1)}if(p){var k,E,b,N=1/0;for(a=0,p=null;a<L;++a)(l=f[a])&&(b=(k=(n=l.site)[0]-e)*k+(E=n[1]-t)*E)<N&&(N=b,p=l);if(p){var P=[e,t],U=[e,i],M=[r,i],y=[r,t];p.halfedges.push(h.push(createBorderEdge(n=p.site,P,U))-1,h.push(createBorderEdge(n,U,M))-1,h.push(createBorderEdge(n,M,y))-1,h.push(createBorderEdge(n,y,P))-1)}}for(a=0;a<L;++a)(l=f[a])&&(l.halfedges.length||delete f[a])}(o,g,R,C)}this.edges=h,this.cells=f,c=s=h=f=null}Diagram.prototype={constructor:Diagram,polygons:function(){var e=this.edges;return this.cells.map(function(t){var r=t.halfedges.map(function(r){return cellHalfedgeStart(t,e[r])});return r.data=t.site.data,r})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(r,i){if(l=(a=r.halfedges).length)for(var a,l,n,c,f,s,h=r.site,d=-1,u=t[a[l-1]],o=u.left===h?u.right:u.left;++d<l;)n=o,o=(u=t[a[d]]).left===h?u.right:u.left,n&&o&&i<n.index&&i<o.index&&(f=n,s=o,((c=h)[0]-s[0])*(f[1]-c[1])-(c[0]-f[0])*(s[1]-c[1])<0)&&e.push([h.data,n.data,o.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,r){for(var i,a,l=this,n=l._found||0,c=l.cells.length;!(a=l.cells[n]);)if(++n>=c)return null;var f=e-a.site[0],s=t-a.site[1],h=f*f+s*s;do{a=l.cells[i=n],n=null,a.halfedges.forEach(function(r){var i=l.edges[r],c=i.left;if(c!==a.site&&c||(c=i.right)){var f=e-c[0],s=t-c[1],d=f*f+s*s;d<h&&(h=d,n=c.index)}})}while(null!==n);return l._found=i,null==r||h<=r*r?a.site:null}}}}]);
//# sourceMappingURL=npm.d3-voronoi-771d696a0a3b32fb2727.js.map